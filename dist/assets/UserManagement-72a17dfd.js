import{c as _,u as ee,a as ae,b as se,r as m,U as A,j as e,W as re,S as te,M as ne,B as p,d as le,D as ie,e as oe,I as u,F as ce,f,g as y,h as U,i as C,k as t,A as de,l as me,T as he,m as ue,n as ge,o as xe,p as pe,q as je,s as ve,t as fe,v as $,w as V,x as B,y as H,L as d,z as ye,P as Ue}from"./index-e299cd20.js";const Ce=_("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Se=()=>{const{toast:r}=ee(),{allUsers:b,createUser:n,updateUser:F,deleteUser:w}=ae(),{language:l}=se(),[o,N]=m.useState([]),[j,i]=m.useState(""),[T,O]=m.useState("all"),[E,I]=m.useState("all"),[K,D]=m.useState(!1),[we,z]=m.useState(null),[c,x]=m.useState({name:"",username:"",email:"",password:"",role:"project",category:"edit"}),s={id:{title:"Manajemen Pengguna",subtitle:"Kelola akun pengguna, role, dan permission",metrics:{totalUsers:"Total Pengguna",activeUsers:"Pengguna Aktif",adminUsers:"Admin",projectUsers:"Project Users",hrUsers:"HR Users",financeUsers:"Finance Users"},actions:{addUser:"Tambah Pengguna",searchUser:"Cari pengguna...",filterRole:"Filter Role",filterCategory:"Filter Kategori",allRoles:"Semua Role",allCategories:"Semua Kategori",admin:"Admin",finance:"Finance",hr:"HR",project:"Project",userEdit:"User Edit",userApproval:"User Approval"},data:{userList:"Daftar Pengguna",noUsers:"Belum ada pengguna.",noResults:"Tidak ada hasil yang ditemukan."},form:{name:"Nama Lengkap",username:"Username",email:"Email",password:"Password",role:"Role",category:"Kategori",save:"Simpan",cancel:"Batal",edit:"Edit Pengguna",create:"Buat Pengguna Baru"},messages:{userCreated:"Pengguna berhasil dibuat!",userUpdated:"Pengguna berhasil diperbarui!",userDeleted:"Pengguna berhasil dihapus!",confirmDelete:'Apakah Anda yakin ingin menghapus pengguna "{name}"? Tindakan ini tidak dapat dibatalkan.',delete:"Hapus",cancel:"Batal"},pageTitle:"User Management - Corporate Management System",pageDesc:"Manajemen pengguna sistem dengan role-based access control"},en:{title:"User Management",subtitle:"Manage user accounts, roles, and permissions",metrics:{totalUsers:"Total Users",activeUsers:"Active Users",adminUsers:"Admins",projectUsers:"Project Users",hrUsers:"HR Users",financeUsers:"Finance Users"},actions:{addUser:"Add User",searchUser:"Search users...",filterRole:"Filter Role",filterCategory:"Filter Category",allRoles:"All Roles",allCategories:"All Categories",admin:"Admin",finance:"Finance",hr:"HR",project:"Project",userEdit:"User Edit",userApproval:"User Approval"},data:{userList:"User List",noUsers:"No users yet.",noResults:"No results found."},form:{name:"Full Name",username:"Username",email:"Email",password:"Password",role:"Role",category:"Category",save:"Save",cancel:"Cancel",edit:"Edit User",create:"Create New User"},messages:{userCreated:"User created successfully!",userUpdated:"User updated successfully!",userDeleted:"User deleted successfully!",confirmDelete:'Are you sure you want to delete user "{name}"? This action cannot be undone.',delete:"Delete",cancel:"Cancel"},pageTitle:"User Management - Corporate Management System",pageDesc:"System user management with role-based access control"}}[l];m.useEffect(()=>{b&&N(b)},[b]);const q=async()=>{try{const a=await n(c);a.success?(r({title:s.messages.userCreated,description:a.message}),D(!1),k()):r({title:"Error",description:a.error,variant:"destructive"})}catch{r({title:"Error",description:"Terjadi kesalahan saat membuat pengguna.",variant:"destructive"})}},G=async(a,h)=>{try{const g=await F(a,h);g.success?(g.data&&N(R=>R.map(v=>v.id===a?{...v,...g.data}:v)),r({title:s.messages.userUpdated,description:g.message||"Perubahan tersimpan."}),z(null),k()):r({title:"Error",description:g.error,variant:"destructive"})}catch{r({title:"Error",description:"Terjadi kesalahan saat memperbarui pengguna.",variant:"destructive"})}},W=async a=>{try{const h=await w(a);h.success?r({title:s.messages.userDeleted,description:h.message}):r({title:"Error",description:h.error,variant:"destructive"})}catch{r({title:"Error",description:"Terjadi kesalahan saat menghapus pengguna.",variant:"destructive"})}},k=()=>{x({name:"",username:"",email:"",password:"",role:"project",category:"edit"})},J=a=>{switch(a){case"admin":return"text-red-600 bg-red-500/10 border-red-500/20";case"finance":return"text-green-600 bg-green-500/10 border-green-500/20";case"hr":return"text-blue-600 bg-blue-500/10 border-blue-500/20";case"project":return"text-purple-600 bg-purple-500/10 border-purple-500/20";default:return"text-muted-foreground bg-muted border-border"}},Q=a=>{switch(a){case"edit":return"text-orange-600 bg-orange-500/10 border-orange-500/20";case"approval":return"text-teal-600 bg-teal-500/10 border-teal-500/20";default:return"text-muted-foreground bg-muted border-border"}},X=a=>{switch(a){case"admin":return s.actions.admin;case"finance":return s.actions.finance;case"hr":return s.actions.hr;case"project":return s.actions.project;default:return a}},Y=a=>{switch(a){case"edit":return s.actions.userEdit;case"approval":return s.actions.userApproval;default:return a}},P=o.filter(a=>{var v,L,M;const h=((v=a.name)==null?void 0:v.toLowerCase().includes(j.toLowerCase()))||((L=a.username)==null?void 0:L.toLowerCase().includes(j.toLowerCase()))||((M=a.email)==null?void 0:M.toLowerCase().includes(j.toLowerCase())),g=T==="all"||a.role===T,R=E==="all"||a.category===E;return h&&g&&R}),S={total:o.length,active:o.filter(a=>a.status!=="inactive").length,admin:o.filter(a=>a.role==="admin").length,project:o.filter(a=>a.role==="project").length,hr:o.filter(a=>a.role==="hr").length,finance:o.filter(a=>a.role==="finance").length},Z=[{title:s.metrics.totalUsers,value:S.total.toString(),icon:A,changeType:"neutral"},{title:s.metrics.activeUsers,value:S.active.toString(),icon:A,changeType:"positive"},{title:s.metrics.adminUsers,value:S.admin.toString(),icon:Ce,changeType:"info"},{title:s.metrics.projectUsers,value:S.project.toString(),icon:A,changeType:"info"}];return e.jsxs(e.Fragment,{children:[e.jsxs(re,{children:[e.jsx("title",{children:s.pageTitle}),e.jsx("meta",{name:"description",content:s.pageDesc})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:s.title}),e.jsx("p",{className:"text-muted-foreground",children:s.subtitle})]}),e.jsx(te,{children:Z.map((a,h)=>e.jsx(ne,{title:a.title,value:a.value,icon:a.icon,changeType:a.changeType,variant:"elevated"},h))}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:e.jsxs(p,{onClick:()=>D(!0),className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),s.actions.addUser]})}),e.jsxs(ie,{title:s.data.userList,variant:"elevated",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(u,{placeholder:s.actions.searchUser,value:j,onChange:a=>i(a.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs(f,{value:T,onValueChange:O,children:[e.jsx(y,{className:"w-40",children:e.jsx(U,{placeholder:s.actions.filterRole})}),e.jsxs(C,{children:[e.jsx(t,{value:"all",children:s.actions.allRoles}),e.jsx(t,{value:"admin",children:s.actions.admin}),e.jsx(t,{value:"finance",children:s.actions.finance}),e.jsx(t,{value:"hr",children:s.actions.hr}),e.jsx(t,{value:"project",children:s.actions.project})]})]}),e.jsxs(f,{value:E,onValueChange:I,children:[e.jsx(y,{className:"w-40",children:e.jsx(U,{placeholder:s.actions.filterCategory})}),e.jsxs(C,{children:[e.jsx(t,{value:"all",children:s.actions.allCategories}),e.jsx(t,{value:"edit",children:s.actions.userEdit}),e.jsx(t,{value:"approval",children:s.actions.userApproval})]})]})]})]}),P.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:o.length===0?s.data.noUsers:s.data.noResults}):e.jsx("div",{className:"space-y-3",children:P.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(A,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-card-foreground",children:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.username," â€¢ ",a.email]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${J(a.role)}`,children:X(a.role)}),(a.role==="hr"||a.role==="finance"||a.role==="project")&&a.category&&e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${Q(a.category)}`,children:Y(a.category)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(be,{user:a,onSave:G,t:s}),e.jsxs(de,{children:[e.jsx(me,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-500 hover:bg-red-500/10",children:e.jsx(he,{className:"h-4 w-4"})})}),e.jsxs(ue,{children:[e.jsxs(ge,{children:[e.jsx(xe,{children:s.form.edit}),e.jsx(pe,{children:s.messages.confirmDelete.replace("{name}",a.name)})]}),e.jsxs(je,{children:[e.jsx(ve,{children:s.messages.cancel}),e.jsx(fe,{onClick:()=>W(a.id),className:"bg-red-600 hover:bg-red-700",children:s.messages.delete})]})]})]})]})]})]},a.id))})]}),e.jsx($,{open:K,onOpenChange:D,children:e.jsxs(V,{className:"max-w-md",children:[e.jsx(B,{children:e.jsx(H,{children:s.form.create})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",children:s.form.name}),e.jsx(u,{id:"name",value:c.name,onChange:a=>x({...c,name:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"username",children:s.form.username}),e.jsx(u,{id:"username",value:c.username,onChange:a=>x({...c,username:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",children:s.form.email}),e.jsx(u,{id:"email",type:"email",value:c.email,onChange:a=>x({...c,email:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password",children:s.form.password}),e.jsx(u,{id:"password",type:"password",value:c.password,onChange:a=>x({...c,password:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"role",children:s.form.role}),e.jsxs(f,{value:c.role,onValueChange:a=>x({...c,role:a}),children:[e.jsx(y,{children:e.jsx(U,{})}),e.jsxs(C,{children:[e.jsx(t,{value:"admin",children:s.actions.admin}),e.jsx(t,{value:"finance",children:s.actions.finance}),e.jsx(t,{value:"hr",children:s.actions.hr}),e.jsx(t,{value:"project",children:s.actions.project})]})]})]}),(c.role==="hr"||c.role==="finance"||c.role==="project")&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:"category",children:s.form.category}),e.jsxs(f,{value:c.category,onValueChange:a=>x({...c,category:a}),children:[e.jsx(y,{children:e.jsx(U,{})}),e.jsxs(C,{children:[e.jsx(t,{value:"edit",children:s.actions.userEdit}),e.jsx(t,{value:"approval",children:s.actions.userApproval})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(p,{onClick:q,className:"flex-1",children:s.form.save}),e.jsx(p,{variant:"outline",onClick:()=>D(!1),className:"flex-1",children:s.form.cancel})]})]})]})})]})]})},be=({user:r,onSave:b,t:n})=>{const[F,w]=m.useState(!1),[l,o]=m.useState({name:r.name||"",username:r.username||"",email:r.email||"",password:"",role:r.role||"project",category:r.category||"edit"});m.useEffect(()=>{o({name:r.name||"",username:r.username||"",email:r.email||"",password:"",role:r.role||"project",category:r.category||"edit"})},[r]);const N=async()=>{try{await b(r.id,l),w(!1)}catch(i){console.error("Error updating user:",i)}},j=i=>{w(i),i||o({name:r.name||"",username:r.username||"",email:r.email||"",password:"",role:r.role||"project",category:r.category||"edit"})};return e.jsxs($,{open:F,onOpenChange:j,children:[e.jsx(ye,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"icon",className:"text-blue-600 hover:text-blue-500 hover:bg-blue-500/10",children:e.jsx(Ue,{className:"h-4 w-4"})})}),e.jsxs(V,{className:"max-w-md",children:[e.jsx(B,{children:e.jsx(H,{children:n.form.edit})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit-${r.id}-name`,children:n.form.name}),e.jsx(u,{id:`edit-${r.id}-name`,value:l.name,onChange:i=>o({...l,name:i.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit-${r.id}-username`,children:n.form.username}),e.jsx(u,{id:`edit-${r.id}-username`,value:l.username,onChange:i=>o({...l,username:i.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit-${r.id}-email`,children:n.form.email}),e.jsx(u,{id:`edit-${r.id}-email`,type:"email",value:l.email,onChange:i=>o({...l,email:i.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit-${r.id}-password`,children:n.form.password}),e.jsx(u,{id:`edit-${r.id}-password`,type:"password",placeholder:n.form.password,value:l.password,onChange:i=>o({...l,password:i.target.value})})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit-${r.id}-role`,children:n.form.role}),e.jsxs(f,{value:l.role,onValueChange:i=>o({...l,role:i}),children:[e.jsx(y,{children:e.jsx(U,{})}),e.jsxs(C,{children:[e.jsx(t,{value:"admin",children:n.actions.admin}),e.jsx(t,{value:"finance",children:n.actions.finance}),e.jsx(t,{value:"hr",children:n.actions.hr}),e.jsx(t,{value:"project",children:n.actions.project})]})]})]}),(l.role==="hr"||l.role==="finance"||l.role==="project")&&e.jsxs("div",{children:[e.jsx(d,{htmlFor:`edit-${r.id}-category`,children:n.form.category}),e.jsxs(f,{value:l.category,onValueChange:i=>o({...l,category:i}),children:[e.jsx(y,{children:e.jsx(U,{})}),e.jsxs(C,{children:[e.jsx(t,{value:"edit",children:n.actions.userEdit}),e.jsx(t,{value:"approval",children:n.actions.userApproval})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(p,{onClick:N,className:"flex-1",children:n.form.save}),e.jsx(p,{variant:"outline",onClick:()=>w(!1),className:"flex-1",children:n.form.cancel})]})]})]})]})};export{Se as default};
