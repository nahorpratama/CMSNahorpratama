import{c as ae,u as se,a as re,b as te,r as u,U as N,j as e,W as le,S as ne,M as ie,B as g,d as ce,D as oe,e as de,I as h,F as me,f as j,g as p,h as v,i as f,k as t,A as he,l as ue,T as ge,m as xe,n as je,o as pe,p as ve,q as fe,s as ye,t as Ce,v as T,w as H,x as k,y as E,z as R,L as o,P as Ue}from"./index-dba17d6d.js";const we=ae("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),De=()=>{const{toast:l}=se(),{allUsers:y,createUser:i,updateUser:c,deleteUser:x}=re(),{language:C}=te(),[n,I]=u.useState([]),[U,K]=u.useState(""),[F,O]=u.useState("all"),[D,z]=u.useState("all"),[q,w]=u.useState(!1),[S,A]=u.useState(null),[r,d]=u.useState({name:"",username:"",email:"",password:"",role:"project",category:"edit"}),s={id:{title:"Manajemen Pengguna",subtitle:"Kelola akun pengguna, role, dan permission",metrics:{totalUsers:"Total Pengguna",activeUsers:"Pengguna Aktif",adminUsers:"Admin",projectUsers:"Project Users",hrUsers:"HR Users",financeUsers:"Finance Users"},actions:{addUser:"Tambah Pengguna",searchUser:"Cari pengguna...",filterRole:"Filter Role",filterCategory:"Filter Kategori",allRoles:"Semua Role",allCategories:"Semua Kategori",admin:"Admin",finance:"Finance",hr:"HR",project:"Project",userEdit:"User Edit",userApproval:"User Approval"},data:{userList:"Daftar Pengguna",noUsers:"Belum ada pengguna.",noResults:"Tidak ada hasil yang ditemukan."},form:{name:"Nama Lengkap",username:"Username",email:"Email",password:"Password",role:"Role",category:"Kategori",save:"Simpan",cancel:"Batal",edit:"Edit Pengguna",create:"Buat Pengguna Baru"},messages:{userCreated:"Pengguna berhasil dibuat!",userUpdated:"Pengguna berhasil diperbarui!",userDeleted:"Pengguna berhasil dihapus!",confirmDelete:'Apakah Anda yakin ingin menghapus pengguna "{name}"? Tindakan ini tidak dapat dibatalkan.',delete:"Hapus",cancel:"Batal"},pageTitle:"User Management - Corporate Management System",pageDesc:"Manajemen pengguna sistem dengan role-based access control"},en:{title:"User Management",subtitle:"Manage user accounts, roles, and permissions",metrics:{totalUsers:"Total Users",activeUsers:"Active Users",adminUsers:"Admin",projectUsers:"Project Users",hrUsers:"HR Users",financeUsers:"Finance Users"},actions:{addUser:"Add User",searchUser:"Search users...",filterRole:"Filter Role",filterCategory:"Filter Category",allRoles:"All Roles",allCategories:"All Categories",admin:"Admin",finance:"Finance",hr:"HR",project:"Project",userEdit:"User Edit",userApproval:"User Approval"},data:{userList:"User List",noUsers:"No users yet.",noResults:"No results found."},form:{name:"Full Name",username:"Username",email:"Email",password:"Password",role:"Role",category:"Category",save:"Save",cancel:"Cancel",edit:"Edit User",create:"Create New User"},messages:{userCreated:"User created successfully!",userUpdated:"User updated successfully!",userDeleted:"User deleted successfully!",confirmDelete:'Are you sure you want to delete user "{name}"? This action cannot be undone.',delete:"Delete",cancel:"Cancel"},pageTitle:"User Management - Corporate Management System",pageDesc:"System user management with role-based access control"}}[C];u.useEffect(()=>{y&&I(y)},[y]);const G=async()=>{try{const a=await i(r);a.success?(l({title:s.messages.userCreated,description:a.message}),w(!1),L()):l({title:"Error",description:a.error,variant:"destructive"})}catch{l({title:"Error",description:"Terjadi kesalahan saat membuat pengguna.",variant:"destructive"})}},P=async a=>{try{const m=await c(S.id,a);m.success?(l({title:s.messages.userUpdated,description:m.message}),A(null),L()):l({title:"Error",description:m.error,variant:"destructive"})}catch{l({title:"Error",description:"Terjadi kesalahan saat memperbarui pengguna.",variant:"destructive"})}},W=async a=>{try{const m=await x(a);m.success?l({title:s.messages.userDeleted,description:m.message}):l({title:"Error",description:m.error,variant:"destructive"})}catch{l({title:"Error",description:"Terjadi kesalahan saat menghapus pengguna.",variant:"destructive"})}},L=()=>{d({name:"",username:"",email:"",password:"",role:"project",category:"edit"})},J=a=>{switch(a){case"admin":return"text-red-600 bg-red-500/10 border-red-500/20";case"finance":return"text-green-600 bg-green-500/10 border-green-500/20";case"hr":return"text-blue-600 bg-blue-500/10 border-blue-500/20";case"project":return"text-purple-600 bg-purple-500/10 border-purple-500/20";default:return"text-muted-foreground bg-muted border-border"}},Q=a=>{switch(a){case"edit":return"text-orange-600 bg-orange-500/10 border-orange-500/20";case"approval":return"text-teal-600 bg-teal-500/10 border-teal-500/20";default:return"text-muted-foreground bg-muted border-border"}},X=a=>{switch(a){case"admin":return s.actions.admin;case"finance":return s.actions.finance;case"hr":return s.actions.hr;case"project":return s.actions.project;default:return a}},Y=a=>{switch(a){case"edit":return s.actions.userEdit;case"approval":return s.actions.userApproval;default:return a}},M=n.filter(a=>{var $,V,B;const m=(($=a.name)==null?void 0:$.toLowerCase().includes(U.toLowerCase()))||((V=a.username)==null?void 0:V.toLowerCase().includes(U.toLowerCase()))||((B=a.email)==null?void 0:B.toLowerCase().includes(U.toLowerCase())),_=F==="all"||a.role===F,ee=D==="all"||a.category===D;return m&&_&&ee}),b={total:n.length,active:n.filter(a=>a.status!=="inactive").length,admin:n.filter(a=>a.role==="admin").length,project:n.filter(a=>a.role==="project").length,hr:n.filter(a=>a.role==="hr").length,finance:n.filter(a=>a.role==="finance").length},Z=[{title:s.metrics.totalUsers,value:b.total.toString(),icon:N,changeType:"neutral"},{title:s.metrics.activeUsers,value:b.active.toString(),icon:N,changeType:"positive"},{title:s.metrics.adminUsers,value:b.admin.toString(),icon:we,changeType:"info"},{title:s.metrics.projectUsers,value:b.project.toString(),icon:N,changeType:"info"}];return e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx("title",{children:s.pageTitle}),e.jsx("meta",{name:"description",content:s.pageDesc})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:s.title}),e.jsx("p",{className:"text-muted-foreground",children:s.subtitle})]}),e.jsx(ne,{children:Z.map((a,m)=>e.jsx(ie,{title:a.title,value:a.value,icon:a.icon,changeType:a.changeType,variant:"elevated"},m))}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:e.jsxs(g,{onClick:()=>w(!0),className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),s.actions.addUser]})}),e.jsxs(oe,{title:s.data.userList,variant:"elevated",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(h,{placeholder:s.actions.searchUser,value:U,onChange:a=>K(a.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs(j,{value:F,onValueChange:O,children:[e.jsx(p,{className:"w-40",children:e.jsx(v,{placeholder:s.actions.filterRole})}),e.jsxs(f,{children:[e.jsx(t,{value:"all",children:s.actions.allRoles}),e.jsx(t,{value:"admin",children:s.actions.admin}),e.jsx(t,{value:"finance",children:s.actions.finance}),e.jsx(t,{value:"hr",children:s.actions.hr}),e.jsx(t,{value:"project",children:s.actions.project})]})]}),e.jsxs(j,{value:D,onValueChange:z,children:[e.jsx(p,{className:"w-40",children:e.jsx(v,{placeholder:s.actions.filterCategory})}),e.jsxs(f,{children:[e.jsx(t,{value:"all",children:s.actions.allCategories}),e.jsx(t,{value:"edit",children:s.actions.userEdit}),e.jsx(t,{value:"approval",children:s.actions.userApproval})]})]})]})]}),M.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.length===0?s.data.noUsers:s.data.noResults}):e.jsx("div",{className:"space-y-3",children:M.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(N,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-card-foreground",children:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.username," â€¢ ",a.email]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${J(a.role)}`,children:X(a.role)}),(a.role==="hr"||a.role==="finance"||a.role==="project")&&a.category&&e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${Q(a.category)}`,children:Y(a.category)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(be,{user:a,onSave:P,t:s}),e.jsxs(he,{children:[e.jsx(ue,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-500 hover:bg-red-500/10",children:e.jsx(ge,{className:"h-4 w-4"})})}),e.jsxs(xe,{children:[e.jsxs(je,{children:[e.jsx(pe,{children:s.form.edit}),e.jsx(ve,{children:s.messages.confirmDelete.replace("{name}",a.name)})]}),e.jsxs(fe,{children:[e.jsx(ye,{children:s.messages.cancel}),e.jsx(Ce,{onClick:()=>W(a.id),className:"bg-red-600 hover:bg-red-700",children:s.messages.delete})]})]})]})]})]})]},a.id))})]}),e.jsxs(T,{open:q,onOpenChange:w,children:[e.jsx(H,{asChild:!0,children:e.jsx("span",{className:"hidden",children:"Trigger"})}),e.jsxs(k,{className:"max-w-md",children:[e.jsx(E,{children:e.jsx(R,{children:s.form.create})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",children:s.form.name}),e.jsx(h,{id:"name",value:r.name,onChange:a=>d({...r,name:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"username",children:s.form.username}),e.jsx(h,{id:"username",value:r.username,onChange:a=>d({...r,username:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",children:s.form.email}),e.jsx(h,{id:"email",type:"email",value:r.email,onChange:a=>d({...r,email:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"password",children:s.form.password}),e.jsx(h,{id:"password",type:"password",value:r.password,onChange:a=>d({...r,password:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"role",children:s.form.role}),e.jsxs(j,{value:r.role,onValueChange:a=>d({...r,role:a}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(t,{value:"admin",children:s.actions.admin}),e.jsx(t,{value:"finance",children:s.actions.finance}),e.jsx(t,{value:"hr",children:s.actions.hr}),e.jsx(t,{value:"project",children:s.actions.project})]})]})]}),(r.role==="hr"||r.role==="finance"||r.role==="project")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"category",children:s.form.category}),e.jsxs(j,{value:r.category,onValueChange:a=>d({...r,category:a}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(t,{value:"edit",children:s.actions.userEdit}),e.jsx(t,{value:"approval",children:s.actions.userApproval})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(g,{onClick:G,className:"flex-1",children:s.form.save}),e.jsx(g,{variant:"outline",onClick:()=>w(!1),className:"flex-1",children:s.form.cancel})]})]})]})]}),S&&e.jsx(T,{open:!!S,onOpenChange:()=>A(null),children:e.jsxs(k,{className:"max-w-md",children:[e.jsx(E,{children:e.jsx(R,{children:s.form.edit})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-name",children:s.form.name}),e.jsx(h,{id:"edit-name",value:r.name,onChange:a=>d({...r,name:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-username",children:s.form.username}),e.jsx(h,{id:"edit-username",value:r.username,onChange:a=>d({...r,username:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-email",children:s.form.email}),e.jsx(h,{id:"edit-email",type:"email",value:r.email,onChange:a=>d({...r,email:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-password",children:s.form.password}),e.jsx(h,{id:"edit-password",type:"password",placeholder:C==="id"?"Kosongkan jika tidak ingin mengubah password":"Leave empty if you don't want to change password",value:r.password,onChange:a=>d({...r,password:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-role",children:s.form.role}),e.jsxs(j,{value:r.role,onValueChange:a=>d({...r,role:a}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(t,{value:"admin",children:s.actions.admin}),e.jsx(t,{value:"finance",children:s.actions.finance}),e.jsx(t,{value:"hr",children:s.actions.hr}),e.jsx(t,{value:"project",children:s.actions.project})]})]})]}),(r.role==="hr"||r.role==="finance"||r.role==="project")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-category",children:s.form.category}),e.jsxs(j,{value:r.category,onValueChange:a=>d({...r,category:a}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(t,{value:"edit",children:s.actions.userEdit}),e.jsx(t,{value:"approval",children:s.actions.userApproval})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(g,{onClick:()=>P(r),className:"flex-1",children:s.form.save}),e.jsx(g,{variant:"outline",onClick:()=>A(null),className:"flex-1",children:s.form.cancel})]})]})]})})]})]})},be=({user:l,onSave:y,t:i})=>{const[c,x]=u.useState({name:l.name||"",username:l.username||"",email:l.email||"",password:"",role:l.role||"project",category:l.category||"edit"}),C=()=>{y(c)};return e.jsxs(T,{children:[e.jsx(H,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"text-blue-600 hover:text-blue-500 hover:bg-blue-500/10",children:e.jsx(Ue,{className:"h-4 w-4"})})}),e.jsxs(k,{className:"max-w-md",children:[e.jsx(E,{children:e.jsx(R,{children:i.form.edit})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${l.id}-name`,children:i.form.name}),e.jsx(h,{id:`edit-${l.id}-name`,value:c.name,onChange:n=>x({...c,name:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${l.id}-username`,children:i.form.username}),e.jsx(h,{id:`edit-${l.id}-username`,value:c.username,onChange:n=>x({...c,username:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${l.id}-email`,children:i.form.email}),e.jsx(h,{id:`edit-${l.id}-email`,type:"email",value:c.email,onChange:n=>x({...c,email:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${l.id}-password`,children:i.form.password}),e.jsx(h,{id:`edit-${l.id}-password`,type:"password",placeholder:i.form.password,value:c.password,onChange:n=>x({...c,password:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${l.id}-role`,children:i.form.role}),e.jsxs(j,{value:c.role,onValueChange:n=>x({...c,role:n}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(t,{value:"admin",children:i.actions.admin}),e.jsx(t,{value:"finance",children:i.actions.finance}),e.jsx(t,{value:"hr",children:i.actions.hr}),e.jsx(t,{value:"project",children:i.actions.project})]})]})]}),(c.role==="hr"||c.role==="finance"||c.role==="project")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${l.id}-category`,children:i.form.category}),e.jsxs(j,{value:c.category,onValueChange:n=>x({...c,category:n}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(t,{value:"edit",children:i.actions.userEdit}),e.jsx(t,{value:"approval",children:i.actions.userApproval})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(g,{onClick:C,className:"flex-1",children:i.form.save}),e.jsx(g,{variant:"outline",className:"flex-1",children:i.form.cancel})]})]})]})]})};export{De as default};
