import{u as R,a as E,r as p,j as e,H as I,m as u,C as y,b as P,c as w,U as V,d as k,L as t,I as h,B as v,e as L,A as G,f as q,T as z,g as O,h as $,i as J,k as K,l as Q,n as W,o as X,D as Y,p as Z,P as _,q as ee,s as ae,t as se,v as ne}from"./index-7daec3a2.js";import{S as A,a as F,b as S,c as T,d as c}from"./select-84e99ab5.js";const le=({user:i,onSave:f})=>{const[d,x]=p.useState({name:i.name,username:i.username,role:i.role}),[N,l]=p.useState(!1),n=o=>{const{id:r,value:C}=o.target;x(D=>({...D,[r]:C}))},m=o=>{x(r=>({...r,role:o}))},g=async()=>{await f(i.id,d),l(!1)};return e.jsxs(Y,{open:N,onOpenChange:l,children:[e.jsx(Z,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"icon",className:"text-yellow-400 hover:text-yellow-300",children:e.jsx(_,{className:"h-4 w-4"})})}),e.jsxs(ee,{className:"sm:max-w-[425px] glass-effect",children:[e.jsx(ae,{children:e.jsx(se,{children:"Edit Pengguna"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"name",className:"text-right",children:"Nama"}),e.jsx(h,{id:"name",value:d.name,onChange:n,className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"username",className:"text-right",children:"Username"}),e.jsx(h,{id:"username",value:d.username,onChange:n,className:"col-span-3"})]}),e.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[e.jsx(t,{htmlFor:"role",className:"text-right",children:"Role"}),e.jsxs(A,{onValueChange:m,value:d.role,children:[e.jsx(F,{className:"col-span-3",children:e.jsx(S,{placeholder:"Pilih role"})}),e.jsxs(T,{children:[e.jsx(c,{value:"admin",children:"Admin"}),e.jsx(c,{value:"finance",children:"Finance"}),e.jsx(c,{value:"hr",children:"HR"}),e.jsx(c,{value:"project",children:"Project"})]})]})]})]}),e.jsx(ne,{children:e.jsx(v,{onClick:g,children:"Simpan Perubahan"})})]})]})},te=()=>{const{user:i,createUser:f,allUsers:d,updateUser:x,deleteUser:N}=R(),{toast:l}=E(),[n,m]=p.useState({name:"",username:"",email:"",password:"",role:"project"}),[g,o]=p.useState(!1),r=a=>{const{id:s,value:j}=a.target;m(B=>({...B,[s]:j}))},C=a=>{m(s=>({...s,role:a}))},D=async a=>{a.preventDefault(),o(!0);const s=await f(n);s.success?(l({title:"Pengguna Berhasil Dibuat",description:`Pengguna ${n.name} telah ditambahkan.`}),m({name:"",username:"",email:"",password:"",role:"project"})):l({title:"Gagal Membuat Pengguna",description:s.error,variant:"destructive"}),o(!1)},U=async(a,s)=>{const j=await x(a,s);j.success?l({title:"Pengguna Berhasil Diperbarui",description:`Data untuk ${s.name} telah disimpan.`}):l({title:"Gagal Memperbarui Pengguna",description:j.error,variant:"destructive"})},H=async a=>{const s=await N(a);s.success?l({title:"Pengguna Berhasil Dihapus"}):l({title:"Gagal Menghapus Pengguna",description:s.error,variant:"destructive"})},M={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},b={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return e.jsxs(e.Fragment,{children:[e.jsxs(I,{children:[e.jsx("title",{children:"Manajemen Pengguna - Corporate Management System"}),e.jsx("meta",{name:"description",content:"Tambah, edit, dan kelola pengguna sistem."})]}),e.jsxs(u.div,{className:"space-y-6",variants:M,initial:"hidden",animate:"visible",children:[e.jsxs(u.div,{variants:b,children:[e.jsx("h1",{className:"text-3xl font-bold gradient-text mb-2",children:"Manajemen Pengguna"}),e.jsx("p",{className:"text-gray-400",children:"Tambah, edit, dan kelola akun pengguna dalam sistem."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(u.div,{className:"lg:col-span-1",variants:b,children:e.jsxs(y,{className:"glass-effect h-full",children:[e.jsx(P,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-blue-400"}),"Tambah Pengguna Baru"]})}),e.jsx(k,{children:e.jsxs("form",{onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(t,{htmlFor:"name",children:"Nama Lengkap"}),e.jsx(h,{id:"name",value:n.name,onChange:r,placeholder:"John Doe"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"username",children:"Username"}),e.jsx(h,{id:"username",value:n.username,onChange:r,placeholder:"johndoe"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(h,{id:"email",type:"email",value:n.email,onChange:r,placeholder:"user@example.com"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"password",children:"Password"}),e.jsx(h,{id:"password",type:"password",value:n.password,onChange:r,placeholder:"••••••••"})]}),e.jsxs("div",{children:[e.jsx(t,{htmlFor:"role",children:"Role"}),e.jsxs(A,{onValueChange:C,value:n.role,children:[e.jsx(F,{children:e.jsx(S,{placeholder:"Pilih role"})}),e.jsxs(T,{children:[e.jsx(c,{value:"admin",children:"Admin"}),e.jsx(c,{value:"finance",children:"Finance"}),e.jsx(c,{value:"hr",children:"HR"}),e.jsx(c,{value:"project",children:"Project"})]})]})]}),e.jsx(v,{type:"submit",disabled:g,className:"w-full",children:g?"Menambahkan...":"Tambah Pengguna"})]})})]})}),e.jsx(u.div,{className:"lg:col-span-2",variants:b,children:e.jsxs(y,{className:"glass-effect h-full",children:[e.jsx(P,{children:e.jsxs(w,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-purple-400"}),"Daftar Pengguna"]})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-2",children:d.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["@",a.username]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium uppercase bg-purple-500/20 text-purple-300 px-2 py-1 rounded-full",children:a.role}),(i==null?void 0:i.id)!==a.id&&e.jsxs(e.Fragment,{children:[e.jsx(le,{user:a,onSave:U}),e.jsxs(G,{children:[e.jsx(q,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-400",children:e.jsx(z,{className:"h-4 w-4"})})}),e.jsxs(O,{className:"glass-effect",children:[e.jsxs($,{children:[e.jsx(J,{children:"Apakah Anda yakin?"}),e.jsx(K,{children:"Tindakan ini tidak dapat dibatalkan. Ini akan menghapus pengguna secara permanen dari sistem."})]}),e.jsxs(Q,{children:[e.jsx(W,{children:"Batal"}),e.jsx(X,{onClick:()=>H(a.id),children:"Hapus"})]})]})]})]})]})]},a.id))})})]})})]})]})]})};export{te as default};
