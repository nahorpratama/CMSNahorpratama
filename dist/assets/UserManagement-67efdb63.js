import{c as ae,u as se,a as re,b as te,r as u,U as S,j as e,W as le,S as ne,M as ie,B as g,d as ce,D as oe,e as de,I as m,F as me,f as j,g as p,h as v,i as f,k as l,A as he,l as ue,T as ge,m as xe,n as je,o as pe,p as ve,q as fe,s as ye,t as Ce,v as E,w as K,x as R,y as P,z as L,L as o,P as Ue,C as we}from"./index-1418d00b.js";const be=ae("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Se=()=>{const{toast:t}=se(),{allUsers:C,createUser:i,updateUser:c,deleteUser:x}=re(),{language:b}=te(),[n,O]=u.useState([]),[N,z]=u.useState(""),[A,q]=u.useState("all"),[k,G]=u.useState("all"),[W,D]=u.useState(!1),[y,T]=u.useState(null),[r,d]=u.useState({name:"",username:"",email:"",password:"",role:"project",category:"edit"}),s={id:{title:"Manajemen Pengguna",subtitle:"Kelola akun pengguna, role, dan permission",metrics:{totalUsers:"Total Pengguna",activeUsers:"Pengguna Aktif",adminUsers:"Admin",projectUsers:"Project Users",hrUsers:"HR Users",financeUsers:"Finance Users"},actions:{addUser:"Tambah Pengguna",searchUser:"Cari pengguna...",filterRole:"Filter Role",filterCategory:"Filter Kategori",allRoles:"Semua Role",allCategories:"Semua Kategori",admin:"Admin",finance:"Finance",hr:"HR",project:"Project",userEdit:"User Edit",userApproval:"User Approval"},data:{userList:"Daftar Pengguna",noUsers:"Belum ada pengguna.",noResults:"Tidak ada hasil yang ditemukan."},form:{name:"Nama Lengkap",username:"Username",email:"Email",password:"Password",role:"Role",category:"Kategori",save:"Simpan",cancel:"Batal",edit:"Edit Pengguna",create:"Buat Pengguna Baru"},messages:{userCreated:"Pengguna berhasil dibuat!",userUpdated:"Pengguna berhasil diperbarui!",userDeleted:"Pengguna berhasil dihapus!",confirmDelete:'Apakah Anda yakin ingin menghapus pengguna "{name}"? Tindakan ini tidak dapat dibatalkan.',delete:"Hapus",cancel:"Batal"},pageTitle:"User Management - Corporate Management System",pageDesc:"Manajemen pengguna sistem dengan role-based access control"},en:{title:"User Management",subtitle:"Manage user accounts, roles, and permissions",metrics:{totalUsers:"Total Users",activeUsers:"Active Users",adminUsers:"Admin",projectUsers:"Project Users",hrUsers:"HR Users",financeUsers:"Finance Users"},actions:{addUser:"Add User",searchUser:"Search users...",filterRole:"Filter Role",filterCategory:"Filter Category",allRoles:"All Roles",allCategories:"All Categories",admin:"Admin",finance:"Finance",hr:"HR",project:"Project",userEdit:"User Edit",userApproval:"User Approval"},data:{userList:"User List",noUsers:"No users yet.",noResults:"No results found."},form:{name:"Full Name",username:"Username",email:"Email",password:"Password",role:"Role",category:"Category",save:"Save",cancel:"Cancel",edit:"Edit User",create:"Create New User"},messages:{userCreated:"User created successfully!",userUpdated:"User updated successfully!",userDeleted:"User deleted successfully!",confirmDelete:'Are you sure you want to delete user "{name}"? This action cannot be undone.',delete:"Delete",cancel:"Cancel"},pageTitle:"User Management - Corporate Management System",pageDesc:"System user management with role-based access control"}}[b];u.useEffect(()=>{C&&O(C)},[C]);const J=async()=>{try{const a=await i(r);a.success?(t({title:s.messages.userCreated,description:a.message}),D(!1),$()):t({title:"Error",description:a.error,variant:"destructive"})}catch{t({title:"Error",description:"Terjadi kesalahan saat membuat pengguna.",variant:"destructive"})}},M=async(a,h)=>{try{const U=a||(y==null?void 0:y.id);if(!U){t({title:"Error",description:"User ID tidak ditemukan untuk update.",variant:"destructive"});return}const w=await c(U,h);w.success?(t({title:s.messages.userUpdated,description:w.message}),T(null),$()):t({title:"Error",description:w.error,variant:"destructive"})}catch{t({title:"Error",description:"Terjadi kesalahan saat memperbarui pengguna.",variant:"destructive"})}},Q=async a=>{try{const h=await x(a);h.success?t({title:s.messages.userDeleted,description:h.message}):t({title:"Error",description:h.error,variant:"destructive"})}catch{t({title:"Error",description:"Terjadi kesalahan saat menghapus pengguna.",variant:"destructive"})}},$=()=>{d({name:"",username:"",email:"",password:"",role:"project",category:"edit"})},X=a=>{switch(a){case"admin":return"text-red-600 bg-red-500/10 border-red-500/20";case"finance":return"text-green-600 bg-green-500/10 border-green-500/20";case"hr":return"text-blue-600 bg-blue-500/10 border-blue-500/20";case"project":return"text-purple-600 bg-purple-500/10 border-purple-500/20";default:return"text-muted-foreground bg-muted border-border"}},Y=a=>{switch(a){case"edit":return"text-orange-600 bg-orange-500/10 border-orange-500/20";case"approval":return"text-teal-600 bg-teal-500/10 border-teal-500/20";default:return"text-muted-foreground bg-muted border-border"}},Z=a=>{switch(a){case"admin":return s.actions.admin;case"finance":return s.actions.finance;case"hr":return s.actions.hr;case"project":return s.actions.project;default:return a}},_=a=>{switch(a){case"edit":return s.actions.userEdit;case"approval":return s.actions.userApproval;default:return a}},V=n.filter(a=>{var B,H,I;const h=((B=a.name)==null?void 0:B.toLowerCase().includes(N.toLowerCase()))||((H=a.username)==null?void 0:H.toLowerCase().includes(N.toLowerCase()))||((I=a.email)==null?void 0:I.toLowerCase().includes(N.toLowerCase())),U=A==="all"||a.role===A,w=k==="all"||a.category===k;return h&&U&&w}),F={total:n.length,active:n.filter(a=>a.status!=="inactive").length,admin:n.filter(a=>a.role==="admin").length,project:n.filter(a=>a.role==="project").length,hr:n.filter(a=>a.role==="hr").length,finance:n.filter(a=>a.role==="finance").length},ee=[{title:s.metrics.totalUsers,value:F.total.toString(),icon:S,changeType:"neutral"},{title:s.metrics.activeUsers,value:F.active.toString(),icon:S,changeType:"positive"},{title:s.metrics.adminUsers,value:F.admin.toString(),icon:be,changeType:"info"},{title:s.metrics.projectUsers,value:F.project.toString(),icon:S,changeType:"info"}];return e.jsxs(e.Fragment,{children:[e.jsxs(le,{children:[e.jsx("title",{children:s.pageTitle}),e.jsx("meta",{name:"description",content:s.pageDesc})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:s.title}),e.jsx("p",{className:"text-muted-foreground",children:s.subtitle})]}),e.jsx(ne,{children:ee.map((a,h)=>e.jsx(ie,{title:a.title,value:a.value,icon:a.icon,changeType:a.changeType,variant:"elevated"},h))}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center",children:e.jsxs(g,{onClick:()=>D(!0),className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4"}),s.actions.addUser]})}),e.jsxs(oe,{title:s.data.userList,variant:"elevated",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(m,{placeholder:s.actions.searchUser,value:N,onChange:a=>z(a.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs(j,{value:A,onValueChange:q,children:[e.jsx(p,{className:"w-40",children:e.jsx(v,{placeholder:s.actions.filterRole})}),e.jsxs(f,{children:[e.jsx(l,{value:"all",children:s.actions.allRoles}),e.jsx(l,{value:"admin",children:s.actions.admin}),e.jsx(l,{value:"finance",children:s.actions.finance}),e.jsx(l,{value:"hr",children:s.actions.hr}),e.jsx(l,{value:"project",children:s.actions.project})]})]}),e.jsxs(j,{value:k,onValueChange:G,children:[e.jsx(p,{className:"w-40",children:e.jsx(v,{placeholder:s.actions.filterCategory})}),e.jsxs(f,{children:[e.jsx(l,{value:"all",children:s.actions.allCategories}),e.jsx(l,{value:"edit",children:s.actions.userEdit}),e.jsx(l,{value:"approval",children:s.actions.userApproval})]})]})]})]}),V.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:n.length===0?s.data.noUsers:s.data.noResults}):e.jsx("div",{className:"space-y-3",children:V.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(S,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-card-foreground",children:a.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.username," â€¢ ",a.email]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${X(a.role)}`,children:Z(a.role)}),a.category&&e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${Y(a.category)}`,children:_(a.category)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ne,{user:a,onSave:M,t:s}),e.jsxs(he,{children:[e.jsx(ue,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"text-red-600 hover:text-red-500 hover:bg-red-500/10",children:e.jsx(ge,{className:"h-4 w-4"})})}),e.jsxs(xe,{children:[e.jsxs(je,{children:[e.jsx(pe,{children:s.form.edit}),e.jsx(ve,{children:s.messages.confirmDelete.replace("{name}",a.name)})]}),e.jsxs(fe,{children:[e.jsx(ye,{children:s.messages.cancel}),e.jsx(Ce,{onClick:()=>Q(a.id),className:"bg-red-600 hover:bg-red-700",children:s.messages.delete})]})]})]})]})]})]},a.id))})]}),e.jsxs(E,{open:W,onOpenChange:D,children:[e.jsx(K,{asChild:!0,children:e.jsx("span",{className:"hidden",children:"Trigger"})}),e.jsxs(R,{className:"max-w-md",children:[e.jsx(P,{children:e.jsx(L,{children:s.form.create})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"name",children:s.form.name}),e.jsx(m,{id:"name",value:r.name,onChange:a=>d({...r,name:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"username",children:s.form.username}),e.jsx(m,{id:"username",value:r.username,onChange:a=>d({...r,username:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"email",children:s.form.email}),e.jsx(m,{id:"email",type:"email",value:r.email,onChange:a=>d({...r,email:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"password",children:s.form.password}),e.jsx(m,{id:"password",type:"password",value:r.password,onChange:a=>d({...r,password:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"role",children:s.form.role}),e.jsxs(j,{value:r.role,onValueChange:a=>d({...r,role:a}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(l,{value:"admin",children:s.actions.admin}),e.jsx(l,{value:"finance",children:s.actions.finance}),e.jsx(l,{value:"hr",children:s.actions.hr}),e.jsx(l,{value:"project",children:s.actions.project})]})]})]}),(r.role==="hr"||r.role==="finance"||r.role==="project")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"category",children:s.form.category}),e.jsxs(j,{value:r.category,onValueChange:a=>d({...r,category:a}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(l,{value:"edit",children:s.actions.userEdit}),e.jsx(l,{value:"approval",children:s.actions.userApproval})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(g,{onClick:J,className:"flex-1",children:s.form.save}),e.jsx(g,{variant:"outline",onClick:()=>D(!1),className:"flex-1",children:s.form.cancel})]})]})]})]}),y&&e.jsx(E,{open:!!y,onOpenChange:()=>T(null),children:e.jsxs(R,{className:"max-w-md",children:[e.jsx(P,{children:e.jsx(L,{children:s.form.edit})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-name",children:s.form.name}),e.jsx(m,{id:"edit-name",value:r.name,onChange:a=>d({...r,name:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-username",children:s.form.username}),e.jsx(m,{id:"edit-username",value:r.username,onChange:a=>d({...r,username:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-email",children:s.form.email}),e.jsx(m,{id:"edit-email",type:"email",value:r.email,onChange:a=>d({...r,email:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-password",children:s.form.password}),e.jsx(m,{id:"edit-password",type:"password",placeholder:b==="id"?"Kosongkan jika tidak ingin mengubah password":"Leave empty if you don't want to change password",value:r.password,onChange:a=>d({...r,password:a.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-role",children:s.form.role}),e.jsxs(j,{value:r.role,onValueChange:a=>d({...r,role:a}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(l,{value:"admin",children:s.actions.admin}),e.jsx(l,{value:"finance",children:s.actions.finance}),e.jsx(l,{value:"hr",children:s.actions.hr}),e.jsx(l,{value:"project",children:s.actions.project})]})]})]}),(r.role==="hr"||r.role==="finance"||r.role==="project")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:"edit-category",children:s.form.category}),e.jsxs(j,{value:r.category,onValueChange:a=>d({...r,category:a}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(l,{value:"edit",children:s.actions.userEdit}),e.jsx(l,{value:"approval",children:s.actions.userApproval})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(g,{onClick:()=>M(y.id,r),className:"flex-1",children:s.form.save}),e.jsx(g,{variant:"outline",onClick:()=>T(null),className:"flex-1",children:s.form.cancel})]})]})]})})]})]})},Ne=({user:t,onSave:C,t:i})=>{const[c,x]=u.useState({name:t.name||"",username:t.username||"",email:t.email||"",password:"",role:t.role||"project",category:t.category||"edit"}),b=()=>{C(t.id,c)};return e.jsxs(E,{children:[e.jsx(K,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"text-blue-600 hover:text-blue-500 hover:bg-blue-500/10",children:e.jsx(Ue,{className:"h-4 w-4"})})}),e.jsxs(R,{className:"max-w-md",children:[e.jsx(P,{children:e.jsx(L,{children:i.form.edit})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${t.id}-name`,children:i.form.name}),e.jsx(m,{id:`edit-${t.id}-name`,value:c.name,onChange:n=>x({...c,name:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${t.id}-username`,children:i.form.username}),e.jsx(m,{id:`edit-${t.id}-username`,value:c.username,onChange:n=>x({...c,username:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${t.id}-email`,children:i.form.email}),e.jsx(m,{id:`edit-${t.id}-email`,type:"email",value:c.email,onChange:n=>x({...c,email:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${t.id}-password`,children:i.form.password}),e.jsx(m,{id:`edit-${t.id}-password`,type:"password",placeholder:i.form.password,value:c.password,onChange:n=>x({...c,password:n.target.value})})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${t.id}-role`,children:i.form.role}),e.jsxs(j,{value:c.role,onValueChange:n=>x({...c,role:n}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(l,{value:"admin",children:i.actions.admin}),e.jsx(l,{value:"finance",children:i.actions.finance}),e.jsx(l,{value:"hr",children:i.actions.hr}),e.jsx(l,{value:"project",children:i.actions.project})]})]})]}),(c.role==="hr"||c.role==="finance"||c.role==="project")&&e.jsxs("div",{children:[e.jsx(o,{htmlFor:`edit-${t.id}-category`,children:i.form.category}),e.jsxs(j,{value:c.category,onValueChange:n=>x({...c,category:n}),children:[e.jsx(p,{children:e.jsx(v,{})}),e.jsxs(f,{children:[e.jsx(l,{value:"edit",children:i.actions.userEdit}),e.jsx(l,{value:"approval",children:i.actions.userApproval})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(g,{onClick:b,className:"flex-1",children:i.form.save}),e.jsx(we,{asChild:!0,children:e.jsx(g,{variant:"outline",className:"flex-1",children:i.form.cancel})})]})]})]})]})};export{Se as default};
